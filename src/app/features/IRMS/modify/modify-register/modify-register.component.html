<div class="page-top">
  <div id="content" class="register register-card">
      <div class="join-card">
          <span class="h1-style">
              <p>IRMS會員申請</p>
          </span>
          <mat-tab-group [(selectedIndex)]="tabIndex" disableRipple>
              <mat-tab disabled="true" label="1. 基本資料填寫">
                  <form class="form-horizontal" [formGroup]="modifyRegisterForm">
                      <!-- container -->
                      <div class="noticeinfo-container">
                          <div class="d-flex formcol">
                              <div class="title">
                                  <p>公司<br />資訊</p>
                              </div>
                              <div class="inputGroup">
                                  <div class="form-group row">
                                      <!-- <span>*</span> -->
                                      <label for="CorporateName" class="col-sm-4 control-label">公司名稱</label>
                                      <div class="col-sm-8">
                                          <!-- <input type="text" oninput="value=value.replace(/[\d]/g,'')" -->
                                          <input type="text" oninput="value=value.replace(/[/d]/g,'')"
                                           class="form-control" pInputText placeholder="請輸入公司名稱"
                                              id="CorporateName" formControlName="CorporateName" />
                                          <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.CorporateName.hasError('required')">
                                              必填欄位
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.CorporateName.hasError('minlength')">
                                              名稱字數請大於2
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.CorporateName.hasError('pattern')">
                                              請輸入英文或者中文
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="Representative" class="col-sm-4 control-label">負責人</label>
                                      <div class="col-sm-8">
                                          <input type="text" oninput="value=value.replace(/[/d]/g,'')"
                                              class="form-control" pInputText placeholder="請輸入負責人"
                                              id="Representative" formControlName="Representative"  />
                                          <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.Representative.hasError('required')">
                                              必填欄位
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.Representative.hasError('minlength')">
                                              名稱字數請大於2
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.Representative.hasError('pattern')">
                                              請輸入英文或者中文
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="TaxIDNumber" class="col-sm-4 control-label">公司統編(會員帳號)</label>
                                      <div class="col-sm-8">
                                          <!-- 只能輸入數字 -->
                                          <input oninput="value=value.replace(/[^\d]/g,'')" maxlength="8" type="text"
                                              class="form-control" pInputText placeholder="請輸入公司統編，此為您的會員帳號"
                                              id="TaxIDNumber" formControlName="TaxIDNumber" />
                                          <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.TaxIDNumber.hasError('required')">
                                              必填欄位
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.TaxIDNumber.hasError('minlength')">
                                              請輸入至少8個數字
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="Password" class="col-sm-4 control-label">登入密碼</label>
                                      <div class="col-sm-8">
                                          <!-- 只能輸入英數 -->
                                          <input type="Password"
                                              class="form-control" placeholder="8位以上英數字" pInputText id="Password"
                                              formControlName="Password" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.Password.hasError('required')">
                                                必填欄位
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.Password.hasError('pattern')">
                                                請輸入8位以上英數字
                                              </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="confirmPassword" class="col-sm-4 control-label">確認密碼</label>
                                      <div class="col-sm-8">
                                          <input type="Password" equalsTo="Password"
                                              class="form-control" placeholder="請再次確認密碼" pInputText
                                              formControlName="confirmPassword" id="confirmPassword" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.confirmPassword.hasError('required')">
                                                再次確認密碼
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.confirmPassword.hasError('pattern')">
                                                請輸入8位以上英數字
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.confirmPassword.hasError('equalsTo')">
                                                請確認與密碼相同
                                              </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="PhoneNumber" class="col-sm-4 control-label">公司電話</label>
                                      <div class="col-sm-8">
                                          <input type="tel" class="form-control" maxlength="11"
                                               placeholder="請輸入傳真號碼 ex. 01-1234567" pInputText
                                               formControlName="PhoneNumber" id="PhoneNumber" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.PhoneNumber.hasError('required')">
                                                必填欄位
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.PhoneNumber.hasError('pattern')">
                                                填入格式 ex. 12-1234567
                                              </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="Fax" class="col-sm-4 control-label">公司傳真</label>
                                      <div class="col-sm-8">
                                          <input type="tel" class="form-control" maxlength="11"
                                              placeholder="請輸入傳真號碼 ex. 01-1234567" pInputText
                                              formControlName="Fax" id="Fax" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.Fax.hasError('pattern')">
                                                  填入格式 ex. 12-1234567
                                              </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="CareerType" class="col-sm-4 control-label">事業別</label>
                                      <div class="col-sm-8 CareerSelsct">
                                          <div class="d-flex">
                                              <p-dropdown #CareerTypeDropDown placeholder="選擇大類別" [showClear]="true"
                                                  [options]="CareerType$ | async" [filter]="true" [required]="true"
                                                  (onChange)="CareerSubType$ = onIndustryChange($event, CareerType, CareerTypeDropDown)"
                                                  inputId="CareerType" formControlName="CareerType">
                                              </p-dropdown>
                                              <p-dropdown #CareerSubType placeholder="選擇中類別" [showClear]="true"
                                                  [options]="CareerSubType$ | async" [filter]="true" [required]="true"
                                                  (onChange)="CareerSubTypeChange($event , CareerSubType)"
                                                  inputId="CareerSubType" formControlName="CareerSubType">
                                              </p-dropdown>
                                          </div>
                                          <div class="small-style">
                                            <small [hidden]=" !modifyRegisterForm.controls.CareerType.hasError('required') &&
                                                              !modifyRegisterForm.controls.CareerSubType.hasError('required')
                                                              ">
                                                必填欄位，請填寫行業類別
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="ControlNumber" class="col-sm-4 control-label">管制編號</label>
                                      <div class="col-sm-8">
                                          <input maxlength="8" type="text"
                                              class="form-control" placeholder="請輸入管制編號" pInputText id="ControlNumber"
                                              formControlName="ControlNumber" />
                                              <div class="small-style">
                                                <small [hidden]="!modifyRegisterForm.controls.ControlNumber.hasError('required')">
                                                  必填欄位，ex.A1234567 若沒有請填寫 "無"
                                                </small>
                                                <small [hidden]="!modifyRegisterForm.controls.ControlNumber.hasError('minlength')">
                                                  字數請大於1
                                                </small>
                                            </div>
                                      </div>
                                  </div>
                              </div>
                          </div>

                          <div class="d-flex formcol">
                              <div class="title">
                                  <p>聯絡<br />方式</p>
                              </div>
                              <div class="inputGroup">
                                  <div class="form-group row">
                                      <label for="ControlNumber" class="col-sm-4 control-label">聯絡人</label>
                                      <div class="col-sm-8">
                                          <input type="text" oninput="value=value.replace(/[/d]/g,'')"
                                              class="form-control" pInputText placeholder="請輸入聯絡人名稱"
                                              id="ContactPerson" formControlName="ContactPerson" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.ContactPerson.hasError('required')">
                                                必填欄位
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.ContactPerson.hasError('minlength')">
                                                名稱字數請大於2
                                              </small>
                                              <small [hidden]="!modifyRegisterForm.controls.ContactPerson.hasError('pattern')">
                                                請輸入英文或者中文
                                              </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <label for="ContactPhoneNumber" class="col-sm-4 control-label">聯絡人電話</label>
                                      <div class="col-sm-8 ContactPhone">
                                          <div class="d-flex">
                                              <input #onin type="tel" class="form-control"
                                                  placeholder="請輸入聯絡號碼 ex. 12-1234567" (keyup)="VaildPhoneNumber();" maxlength="11"
                                                  pInputText id="ContactPhoneNumber"
                                                  formControlName="ContactPhoneNumber" />-
                                              <input type="tel" class="form-control" placeholder="#分機" maxlength="4"
                                                  pInputText id="ContactPhoneExtension"
                                                  formControlName="ContactPhoneExtension"/>
                                          </div>
                                          <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.ContactPhoneNumber.hasError('required')">
                                                必填欄位，與手機擇一填寫
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.ContactPhoneNumber.hasError('pattern')">
                                                填入格式 ex. 12-1234567
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.ContactPhoneExtension.hasError('pattern')">
                                                分機數字請大於2
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                    <label for="ContactMobilePhone" class="col-sm-4 control-label">聯絡人手機</label>
                                    <div class="col-sm-8">
                                        <input type="tel" class="form-control"
                                             placeholder="請輸入手機號碼 ex. 1234-123456" (keyup)="VaildMobilePhone();" maxlength="11"
                                             pInputText id="ContactMobilePhone"
                                             formControlName="ContactMobilePhone" />
                                        <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.ContactMobilePhone.hasError('required')">
                                              必填欄位，與電話擇一填寫
                                            </small>
                                            <small [hidden]="!modifyRegisterForm.controls.ContactMobilePhone.hasError('pattern')">
                                              填入格式 ex. 1234-123456
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                  <div class="form-group row">
                                      <label for="ContactMail" class="col-sm-4 control-label">聯絡信箱</label>
                                      <div class="col-sm-8">
                                          <input type="email" class="form-control" placeholder="請輸入聯絡信箱" pInputText
                                              id="ContactMail" formControlName="ContactMail" />
                                          <div class="small-style">
                                              <small [hidden]="!modifyRegisterForm.controls.ContactMail.hasError('required')">
                                                必填欄位
                                              </small>
                                              <small [hidden]=" !modifyRegisterForm.controls.ContactMail.hasError('email')">
                                                請填寫有效的電子信箱，以收取審核通知
                                              </small>
                                          </div>
                                      </div>
                                  </div>

                                  <div class="form-group row">
                                      <label for="BillingZipCode" class="col-sm-4 control-label">帳寄地址</label>
                                      <div class="col-sm-8 addressSelsct">
                                          <div class="d-flex">
                                              <input oninput="value=value.replace(/[^\d]/g,'')" type="text" maxlength="3"
                                                  class="form-control" placeholder="郵遞區號" pInputText id="BillingZipCode"
                                                  formControlName="BillingZipCode"/>
                                              <p-dropdown placeholder="選擇縣市" [showClear]="true"
                                                  [options]="BillingCity$ | async" [required]="true"
                                                  (onChange)="BillingDistrict$ = onCityChange($event, BillingDistrict)"
                                                  inputId="BillingCity" formControlName="BillingCity">
                                              </p-dropdown>
                                              <p-dropdown #BillingDistrict placeholder="選擇區鄉鎮" [showClear]="true"
                                                  [options]="BillingDistrict$ | async" [required]="true"
                                                  inputId="BillingDistrict" formControlName="BillingDistrict">
                                              </p-dropdown>
                                          </div>
                                          <div class="addressInput">
                                            <input type="text" class="form-control" pInputText placeholder="請輸入詳細地址"
                                            id="BillingRoad" formControlName="BillingRoad" />
                                          </div>
                                          <div class="small-style">
                                            <small [hidden]=" !modifyRegisterForm.controls.BillingCity.hasError('required') &&
                                                              !modifyRegisterForm.controls.BillingDistrict.hasError('required') &&
                                                              !modifyRegisterForm.controls.BillingRoad.hasError('required')
                                                              ">
                                                必填欄位，請填寫正確完整的地址
                                            </small>
                                          </div>
                                      </div>
                                  </div>

                                  <div class="form-group row">
                                      <label for="MailingZipCode" class="col-sm-4 control-label">通訊地址</label>
                                      <div class="col-sm-8 addressSelsct">
                                          <div class="d-flex">
                                              <input oninput="value=value.replace(/[^\d]/g,'')" type="text" maxlength="3"
                                                  class="form-control" placeholder="郵遞區號" pInputText id="MailingZipCode"
                                                  formControlName="MailingZipCode" />
                                              <p-dropdown placeholder="選擇縣市" [showClear]="true"
                                                  [options]="MailingCity$ | async"  [required]="true"
                                                  (onChange)="MailingDistrict$ = onCityChange($event, MailingDistrict)"
                                                  inputId="MailingCity" formControlName="MailingCity">
                                              </p-dropdown>
                                              <p-dropdown #MailingDistrict placeholder="選擇區鄉鎮" [showClear]="true"
                                                  [options]="MailingDistrict$ | async"  [required]="true"
                                                  inputId="MailingDistrict" formControlName="MailingDistrict">
                                              </p-dropdown>
                                          </div>
                                          <div class="addressInput">
                                              <input type="text" class="form-control" pInputText placeholder="請輸入詳細地址"
                                                  id="MailingRoad" formControlName="MailingRoad" />
                                          </div>
                                          <div class="small-style">
                                            <small [hidden]=" !modifyRegisterForm.controls.MailingCity.hasError('required') &&
                                                              !modifyRegisterForm.controls.MailingDistrict.hasError('required') &&
                                                              !modifyRegisterForm.controls.MailingRoad.hasError('required')
                                                              ">
                                                必填欄位，請填寫正確完整的地址
                                            </small>
                                          </div>
                                          <div class="checkbox">
                                              <p-checkbox
                                                  (onChange)="pasteCurAddress($event , modifyRegisterForm)"
                                                  binary="true"></p-checkbox>
                                              <label for="binary" style="margin-right: 1rem;">&#xA0;同帳寄地址</label>
                                          </div>
                                      </div>
                                  </div>

                              </div>
                          </div>
                          <div class="d-flex formcol">
                              <div class="title">
                                  <p>忘記<br />密碼</p>
                              </div>
                              <div class="inputGroup">
                                  <div class="form-group row">
                                      <label for="BackupMail" class="col-sm-4 control-label">備援電子郵件</label>
                                      <div class="col-sm-8">
                                          <input type="email" class="form-control" placeholder="請輸入備援電子郵件" pInputText
                                              id="BackupMail" formControlName="BackupMail"/>
                                          <div class="small-style">
                                            <small [hidden]="!modifyRegisterForm.controls.BackupMail.hasError('required')">
                                                  必填欄位
                                            </small>
                                            <small [hidden]=" !modifyRegisterForm.controls.BackupMail.hasError('email')">
                                                  請填寫有效的電子信箱
                                            </small>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="form-group row d-flex j-content-center" style=" font-size: 1.3em">
                          <div [formGroup]="Box">
                              <div class="tips d-flex j-content-center">
                                  <a href="">使用者條款</a>
                                  <a href="">隱私保護政策</a>
                              </div>
                              <div class="checkbox">
                                <p-checkbox [formControl]="Box.controls['ItisOK']" binary="true"></p-checkbox>
                                <label for="ItisOK" style="margin-right: 1rem;">&#xA0;我已閱讀並同意使用者條款與個人資料和隱私保護政策</label>
                            </div>
                          </div>
                      </div>
                      <div class="form-group row">
                          <div class="justify-content-center btn-center">
                              <button type="button" class="btn btn-primary btn-lg register-btn"
                                  (click)="return()">返回</button>
                              <button type="button" (click)="NextTab()" class="btn btn-success btn-lg register-btn">
                                下一步</button>
                          </div>
                      </div>
                  </form>
              </mat-tab>
              <mat-tab  label="2. 資料確認" disabled="true">
                  <form class="form-horizontal">
                      <div class="notice-container">
                          <table class="confirmTable">
                              <thead class="line">
                                  <h3>基本資料</h3>
                                  <button type="button" id="edit-btn" (click)="BackTab()"
                                      class="register-btn btn btn-lg btn-primary">修改</button>
                              </thead>
                              <tbody>
                                  <tr>
                                      <th>公司名稱</th>
                                      <td>{{ modifyRegisterForm.controls.CorporateName.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>負責人</th>
                                      <td>{{ modifyRegisterForm.controls.Representative.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>公司統編(會員帳號)</th>
                                      <td>{{ modifyRegisterForm.controls.TaxIDNumber.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>登入密碼</th>
                                      <td>{{ modifyRegisterForm.controls.Password.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>公司電話</th>
                                      <td>{{ modifyRegisterForm.controls.PhoneNumber.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>公司傳真</th>
                                      <td>{{ modifyRegisterForm.controls.Fax.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>事業別</th>
                                      <td>{{ CareerTypeDropDown.label }}&#xA0;>&#xA0;{{ CareerSubType.label }}</td>
                                  </tr>
                                  <tr>
                                      <th>管制編號</th>
                                      <td>{{ modifyRegisterForm.controls.ControlNumber.value }}</td>
                                  </tr>
                              </tbody>
                              <tbody>
                                  <tr>
                                      <th>聯絡人</th>
                                      <td>{{ modifyRegisterForm.controls.ContactPerson.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>聯絡人電話</th>
                                      <td>{{ modifyRegisterForm.controls.ContactPhoneNumber.value }}<span>分機{{ modifyRegisterForm.controls.ContactPhoneExtension.value }}</span></td>
                                  </tr>
                                  <tr>
                                      <th>聯絡人手機</th>
                                      <td>{{ modifyRegisterForm.controls.ContactMobilePhone.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>聯絡信箱</th>
                                      <td>{{ modifyRegisterForm.controls.ContactMail.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>帳收地址</th>
                                      <td>{{ modifyRegisterForm.controls.BillingZipCode.value }}&#xA0;{{ modifyRegisterForm.controls.BillingCity.value }}{{ modifyRegisterForm.controls.BillingDistrict.value }}{{ modifyRegisterForm.controls.BillingRoad.value }}</td>
                                  </tr>
                                  <tr>
                                      <th>通訊地址</th>
                                      <td>{{ modifyRegisterForm.controls.MailingZipCode.value }}&#xA0;{{ modifyRegisterForm.controls.MailingCity.value }}{{ modifyRegisterForm.controls.MailingDistrict.value }}{{ modifyRegisterForm.controls.MailingRoad.value }}</td>
                                  </tr>
                              </tbody>
                              <tbody class="border-none">
                                  <tr>
                                      <th>備援信箱</th>
                                      <td>{{ modifyRegisterForm.controls.BackupMail.value }}</td>
                                  </tr>
                              </tbody>
                              <tbody class="line"></tbody>
                          </table>
                      </div>
                      <div class="form-group">
                          <div class="justify-content-center">
                              <button type="submit" class="btn btn-success btn-lg register-btn btn-top"
                                  (click)="onSubmit(modifyRegisterForm)">
                                  確認資料無誤
                              </button>
                          </div>
                      </div>
                  </form>
              </mat-tab>
              <mat-tab disabled="true" label="3. 完成會員申請">
                  <div class="finish finish-top">
                      <div class="d-flex f-d-column a-items-center">
                          <div class="d-flex j-content-center a-items-center">
                              <i class="fa fa-check-circle-o"></i>
                              <h1>已將您的申請資料<br />傳送給平台審核人員</h1>
                          </div>
                          <div>
                              <p>
                                  ※ 審核工作天約為<span class="redColor"> 2-3 </span>天(不含例假日)， 會員申請通過後會寄信件通知，請您留意。
                              </p>
                              <p>
                                  ※ 有其他問題歡迎來電<span class="blueColor"> 02-2233-4455</span>，
                                  將有客服人員為您服務。
                              </p>
                          </div>
                          <a href="#">前往官網</a>
                      </div>
                  </div>
              </mat-tab>
          </mat-tab-group>
      </div>
  </div>
</div>
<p-toast position="bottom-right"></p-toast>

<div id="progressSpinner" class="background-black" *ngIf="progressSpinner">
  <div class="progress-spinner">
    <p-progressSpinner class="customProgress"></p-progressSpinner>
  </div>
</div>
